<% provide(:title, "Shipments") %>

<h1>Shipments</h1>
<p><%= link_to 'Add New Shipment', new_shipment_path, class: "button" %></p>

<%= render partial: 'search_form', object: @search_form %>

<% if @shipments.any? %>
  <ul class="stack-for-small secondary button-group">
    <li><%= link_to "<i class='fi-page-multiple'></i> Export PDF".html_safe,
      invoices_shipments_path(search: params[:search]), target: '_blank', class: "button" %>
    </li>
    <li><%= link_to "<i class='fi-page-export-csv'></i> Export CSV".html_safe,
      invoices_csv_shipments_path(search: params[:search]), target: '_blank', class: "button" %>
    </li>
    <li><%= link_to "<i class='fi-page-export-csv'></i> Export QuickBooks".html_safe,
        invoices_iif_shipments_path(search: params[:search]), target: '_blank', class: "button" %>
    </li>
  </ul>
<% end %>

<table class="responsive-table">
  <thead>
    <tr>
      <th scope="col">Invoice</th>
      <th scope="col">Date</th>
      <th scope="col">Client</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @shipments.each do |shipment| %>
      <tr class="js-clickableRow" href="<%= edit_shipment_path(shipment) %>">
        <th scope="row"><%= shipment.invoice_number %></th>
        <td data-title="Date"><%= shipment.date %></td>
        <td data-title="Client Name"><%= shipment.client_name %></td>
        <td data-title="Action">
          <%= link_to edit_shipment_path(shipment) do %>
            <span class="table-action-icon" data-tooltip aria-haspopup="true" data-options="show_on:medium" title="Edit Shipment">
              <i class="fi-page-edit"></i>
            </span>
          <% end %>
          <%= link_to invoice_shipment_path(shipment, format: :pdf), target: "_blank" do %>
            <span class="table-action-icon" data-tooltip aria-haspopup="true" data-options="show_on:medium" title="Invoice">
              <i class="fi-page-export-pdf"></i>
            </span>
          <% end %>
          <%= link_to packing_slip_shipment_path(shipment, format: :pdf), target: "_blank" do %>
            <span class="table-action-icon" data-tooltip aria-haspopup="true" data-options="show_on:medium" title="Packing Slip">
              <i class="fi-page"></i>
            </span>
          <% end %>
          <%= link_to invoice_iif_shipment_path(shipment), target: "_blank" do %>
            <span class="table-action-icon" data-tooltip aria-haspopup="true" data-options="show_on:medium" title="IIF">
              <i class="fi-page-export-csv"></i>
            </span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="pagination">
  <%= will_paginate @shipments %>
</div>
