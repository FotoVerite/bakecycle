<%= form_for @order do |f| %>
  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> prohibited
        this order from being saved:</h2>
      <ul>
      <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% unless f.object.persisted? %>
    <div class="row">
      <div class="small-6 columns end">
        <%= f.label :order_type, "Order Type"%>
        <%= f.radio_button(:order_type, "standing", "ng-model" => "order.order_type") %>
        <%= f.label(:order_type_standing, "Standing") %>
        <%= f.radio_button(:order_type, "temporary", "ng-model"=> "order.order_type") %>
        <%= f.label(:order_type_temporary, "Temporary") %>
      </div>
    </div>
    <div class="row">
      <div class="small-6 columns">
         <%= f.label :client_id, "Client" %>
         <%= collection_select(:order, :client_id, @order_creator.clients, :id, :name, prompt: 'Select One') %>
      </div>
    </div>
  <% end %>

  <div class="row">
     <div class="small-6 columns">
       <%= f.label :start_date, "Effective Date" %>
       <%= f.text_field :start_date, class: "js-datepicker", "ng-model" => "order.start_date"%>
    </div>
    <% unless f.object.temporary? %>
     <div class="small-6 columns end" ng-hide="isTemporary()">
       <%= f.label :end_date, "End Date" %>
       <%= f.text_field :end_date, class: "js-datepicker" %>
    </div>
    <% end %>
  </div>

  <div class="row">
    <div class="small-6 columns">
       <%= f.label :route_id, "Route" %>
       <%= collection_select(:order, :route_id, @order_creator.routes, :id, :name, prompt: 'Select One') %>
    </div>
  </div>

  <div class="row">
    <div class="small-6 columns">
      <%= f.label :note, "Special Notes" %>
      <%= f.text_area :note %>
    </div>
  </div>

  <%= render partial: "order_items", locals: {f: f} %>

  <div class="row">
    <div class="small-12 columns">
      <%= f.submit (@order.new_record? ? "Create" : "Update"), class: "button", name: nil %>
      <% unless @order.new_record? %>
        <%= link_to 'Delete', order_path(@order), class: "button alert",
                                  method: :delete, data: { confirm: 'Are you sure?' } %>
      <% end %>
    </div>
  </div>
<% end %>
